{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///react-countdown-clock.js","webpack:///webpack/bootstrap 6bfcaf3f9d392f6233d5","webpack:///./react-countdown-clock.coffee","webpack:///external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","React","createClass","_seconds","_radius","_fraction","_content","_canvas","_timeoutIds","displayName","propTypes","seconds","PropTypes","number","size","weight","color","string","fontSize","font","alpha","timeFormat","onComplete","func","onClick","showMilliseconds","bool","getDefaultProps","componentDidUpdate","props","_setupTimer","_clearBackground","_drawBackground","_updateCanvas","componentDidMount","componentWillUnmount","_cancelTimer","_setScale","_setupCanvases","_drawTimer","_startTimer","_clearTimer","_tickPeriod","_calculateTick","_innerRadius","tick","tickScale","_background","refs","background","getContext","_timer","timer","textAlign","textBaseline","component","addEventListener","push","setTimeout","_this","_tick","i","len","ref","timeout","length","clearTimeout","removeEventListener","start","Date","now","duration","_handleComplete","clearRect","width","height","beginPath","globalAlpha","fillStyle","arc","Math","PI","closePath","fill","_formattedTime","decimals","hours","minutes","timeParts","1","parseInt","toFixed","join","_fontSize","timeString","scale","formattedTime","percent","fillText","render","createElement","className","style","position"],"mappings":"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","file":"react-countdown-clock.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactCountdownClock\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactCountdownClock\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactCountdownClock\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactCountdownClock\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar React;\n\t\n\tReact = __webpack_require__(1);\n\t\n\tmodule.exports = React.createClass({\n\t  _seconds: 0,\n\t  _radius: null,\n\t  _fraction: null,\n\t  _content: null,\n\t  _canvas: null,\n\t  _timeoutIds: [],\n\t  displayName: 'ReactCountdownClock',\n\t  propTypes: {\n\t    seconds: React.PropTypes.number,\n\t    size: React.PropTypes.number,\n\t    weight: React.PropTypes.number,\n\t    color: React.PropTypes.string,\n\t    fontSize: React.PropTypes.string,\n\t    font: React.PropTypes.string,\n\t    alpha: React.PropTypes.number,\n\t    timeFormat: React.PropTypes.string,\n\t    onComplete: React.PropTypes.func,\n\t    onClick: React.PropTypes.func,\n\t    showMilliseconds: React.PropTypes.bool\n\t  },\n\t  getDefaultProps: function() {\n\t    return {\n\t      seconds: 60,\n\t      size: 300,\n\t      color: '#000',\n\t      alpha: 1,\n\t      timeFormat: 'hms',\n\t      fontSize: 'auto',\n\t      font: 'Arial',\n\t      showMilliseconds: true\n\t    };\n\t  },\n\t  componentDidUpdate: function(props) {\n\t    if (props.seconds !== this.props.seconds) {\n\t      this._seconds = props.seconds;\n\t      this._setupTimer();\n\t    }\n\t    if (props.color !== this.props.color) {\n\t      this._clearBackground();\n\t      this._drawBackground();\n\t      return this._updateCanvas();\n\t    }\n\t  },\n\t  componentDidMount: function() {\n\t    this._seconds = this.props.seconds;\n\t    return this._setupTimer();\n\t  },\n\t  componentWillUnmount: function() {\n\t    return this._cancelTimer();\n\t  },\n\t  _setupTimer: function() {\n\t    this._setScale();\n\t    this._setupCanvases();\n\t    this._drawBackground();\n\t    this._drawTimer();\n\t    return this._startTimer();\n\t  },\n\t  _updateCanvas: function() {\n\t    this._clearTimer();\n\t    return this._drawTimer();\n\t  },\n\t  _setScale: function() {\n\t    this._radius = this.props.size / 2;\n\t    this._fraction = 2 / this._seconds;\n\t    this._tickPeriod = this._calculateTick();\n\t    return this._innerRadius = this.props.weight ? this._radius - this.props.weight : this._radius / 1.8;\n\t  },\n\t  _calculateTick: function() {\n\t    var tick, tickScale;\n\t    tickScale = 1.8;\n\t    tick = this._seconds * tickScale;\n\t    if (tick > 1000) {\n\t      return 1000;\n\t    } else {\n\t      return tick;\n\t    }\n\t  },\n\t  _setupCanvases: function() {\n\t    this._background = this.refs.background.getContext('2d');\n\t    this._timer = this.refs.timer.getContext('2d');\n\t    this._timer.textAlign = 'center';\n\t    this._timer.textBaseline = 'middle';\n\t    if (this.props.onClick != null) {\n\t      return this.refs.component.addEventListener('click', this.props.onClick);\n\t    }\n\t  },\n\t  _startTimer: function() {\n\t    return this._timeoutIds.push(setTimeout(((function(_this) {\n\t      return function() {\n\t        return _this._tick();\n\t      };\n\t    })(this)), 200));\n\t  },\n\t  _cancelTimer: function() {\n\t    var i, len, ref, timeout;\n\t    ref = this._timeoutIds;\n\t    for (i = 0, len = ref.length; i < len; i++) {\n\t      timeout = ref[i];\n\t      clearTimeout(timeout);\n\t    }\n\t    if (this.props.onClick != null) {\n\t      return this.refs.component.removeEventListener('click', this.props.onClick);\n\t    }\n\t  },\n\t  _tick: function() {\n\t    var start;\n\t    start = Date.now();\n\t    return this._timeoutIds.push(setTimeout(((function(_this) {\n\t      return function() {\n\t        var duration;\n\t        duration = (Date.now() - start) / 1000;\n\t        _this._seconds -= duration;\n\t        if (_this._seconds <= 0) {\n\t          _this._seconds = 0;\n\t          _this._handleComplete();\n\t          return _this._clearTimer();\n\t        } else {\n\t          _this._updateCanvas();\n\t          return _this._tick();\n\t        }\n\t      };\n\t    })(this)), this._tickPeriod));\n\t  },\n\t  _handleComplete: function() {\n\t    if (this.props.onComplete) {\n\t      return this.props.onComplete();\n\t    }\n\t  },\n\t  _clearBackground: function() {\n\t    return this._background.clearRect(0, 0, this.refs.timer.width, this.refs.timer.height);\n\t  },\n\t  _clearTimer: function() {\n\t    return this._timer.clearRect(0, 0, this.refs.timer.width, this.refs.timer.height);\n\t  },\n\t  _drawBackground: function() {\n\t    this._background.beginPath();\n\t    this._background.globalAlpha = this.props.alpha / 3;\n\t    this._background.fillStyle = this.props.color;\n\t    this._background.arc(this._radius, this._radius, this._radius, 0, Math.PI * 2, false);\n\t    this._background.arc(this._radius, this._radius, this._innerRadius, Math.PI * 2, 0, true);\n\t    this._background.closePath();\n\t    return this._background.fill();\n\t  },\n\t  _formattedTime: function() {\n\t    var decimals, hours, minutes, ref, seconds, timeParts;\n\t    decimals = (ref = this._seconds <= 9.9 && this.props.showMilliseconds) != null ? ref : {\n\t      1: 0\n\t    };\n\t    if (this.props.timeFormat === 'hms') {\n\t      hours = parseInt(this._seconds / 3600) % 24;\n\t      minutes = parseInt(this._seconds / 60) % 60;\n\t      seconds = (this._seconds % 60).toFixed(decimals);\n\t      if (hours < 10) {\n\t        hours = \"0\" + hours;\n\t      }\n\t      if (minutes < 10) {\n\t        minutes = \"0\" + minutes;\n\t      }\n\t      if (seconds < 10 && minutes >= 1) {\n\t        seconds = \"0\" + seconds;\n\t      }\n\t      timeParts = [];\n\t      if (hours > 0) {\n\t        timeParts.push(hours);\n\t      }\n\t      if (minutes > 0) {\n\t        timeParts.push(minutes);\n\t      }\n\t      timeParts.push(seconds);\n\t      return timeParts.join(':');\n\t    } else {\n\t      return this._seconds.toFixed(decimals);\n\t    }\n\t  },\n\t  _fontSize: function(timeString) {\n\t    var scale, size;\n\t    if (this.props.fontSize === 'auto') {\n\t      scale = (function() {\n\t        switch (timeString.length) {\n\t          case 8:\n\t            return 4;\n\t          case 5:\n\t            return 3;\n\t          default:\n\t            return 2;\n\t        }\n\t      })();\n\t      size = this._radius / scale;\n\t      return size + \"px\";\n\t    } else {\n\t      return this.props.fontSize;\n\t    }\n\t  },\n\t  _drawTimer: function() {\n\t    var formattedTime, percent;\n\t    percent = this._fraction * this._seconds + 1.5;\n\t    formattedTime = this._formattedTime();\n\t    this._timer.globalAlpha = this.props.alpha;\n\t    this._timer.fillStyle = this.props.color;\n\t    this._timer.font = \"bold \" + (this._fontSize(formattedTime)) + \" \" + this.props.font;\n\t    this._timer.fillText(formattedTime, this._radius, this._radius);\n\t    this._timer.beginPath();\n\t    this._timer.arc(this._radius, this._radius, this._radius, Math.PI * 1.5, Math.PI * percent, false);\n\t    this._timer.arc(this._radius, this._radius, this._innerRadius, Math.PI * percent, Math.PI * 1.5, true);\n\t    this._timer.closePath();\n\t    return this._timer.fill();\n\t  },\n\t  render: function() {\n\t    return React.createElement(\"div\", {\n\t      \"ref\": 'component',\n\t      \"className\": \"react-countdown-clock\"\n\t    }, React.createElement(\"canvas\", {\n\t      \"ref\": 'background',\n\t      \"style\": {\n\t        position: 'absolute'\n\t      },\n\t      \"width\": this.props.size,\n\t      \"height\": this.props.size\n\t    }), React.createElement(\"canvas\", {\n\t      \"ref\": 'timer',\n\t      \"style\": {\n\t        position: 'absolute'\n\t      },\n\t      \"width\": this.props.size,\n\t      \"height\": this.props.size\n\t    }));\n\t  }\n\t});\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** react-countdown-clock.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6bfcaf3f9d392f6233d5\n **/","React  = require 'react'\n\nmodule.exports = React.createClass\n  _seconds: 0\n  _radius: null\n  _fraction: null\n  _content: null\n  _canvas: null\n  _timeoutIds: []\n\n  displayName: 'ReactCountdownClock'\n\n  propTypes:\n    seconds: React.PropTypes.number\n    size: React.PropTypes.number\n    weight: React.PropTypes.number\n    color: React.PropTypes.string\n    fontSize: React.PropTypes.string\n    font: React.PropTypes.string\n    alpha: React.PropTypes.number\n    timeFormat: React.PropTypes.string\n    onComplete: React.PropTypes.func\n    onClick: React.PropTypes.func\n    showMilliseconds: React.PropTypes.bool\n\n  getDefaultProps: ->\n    seconds: 60\n    size: 300\n    color: '#000'\n    alpha: 1\n    timeFormat: 'hms'\n    fontSize: 'auto'\n    font: 'Arial'\n    showMilliseconds: true\n\n  componentDidUpdate: (props) ->\n    if props.seconds != @props.seconds\n      @_seconds = props.seconds\n      @_setupTimer()\n\n    if props.color != @props.color\n      @_clearBackground()\n      @_drawBackground()\n      @_updateCanvas()\n\n  componentDidMount: ->\n    @_seconds = @props.seconds\n    @_setupTimer()\n\n  componentWillUnmount: ->\n    @_cancelTimer()\n\n  _setupTimer: ->\n    @_setScale()\n    @_setupCanvases()\n    @_drawBackground()\n    @_drawTimer()\n    @_startTimer()\n\n  _updateCanvas: ->\n    @_clearTimer()\n    @_drawTimer()\n\n  _setScale: ->\n    @_radius      = @props.size / 2\n    @_fraction    = 2 / @_seconds\n    @_tickPeriod  = @_calculateTick()\n    @_innerRadius =\n      if @props.weight\n        @_radius - @props.weight\n      else\n        @_radius / 1.8\n\n  _calculateTick: ->\n    # Tick period (milleseconds) needs to be fast for smaller time periods and slower\n    # for longer ones. This provides smoother rendering. It should never exceed 1 second.\n    tickScale = 1.8\n    tick = @_seconds * tickScale\n    if tick > 1000 then 1000 else tick\n\n  _setupCanvases: ->\n    @_background = @refs.background.getContext '2d'\n    @_timer = @refs.timer.getContext '2d'\n    @_timer.textAlign = 'center'\n    @_timer.textBaseline = 'middle'\n    if @props.onClick?\n      @refs.component.addEventListener 'click', @props.onClick\n\n  _startTimer: ->\n    # Give it a moment to collect it's thoughts for smoother render\n    @_timeoutIds.push(setTimeout ( => @_tick() ), 200)\n\n  _cancelTimer: ->\n    for timeout in @_timeoutIds\n      clearTimeout timeout\n\n    if @props.onClick?\n      @refs.component.removeEventListener 'click', @props.onClick\n\n  _tick: ->\n    start = Date.now()\n    @_timeoutIds.push(setTimeout ( =>\n      duration = (Date.now() - start) / 1000\n      @_seconds -= duration\n\n      if @_seconds <= 0\n        @_seconds = 0\n        @_handleComplete()\n        @_clearTimer()\n      else\n        @_updateCanvas()\n        @_tick()\n    ), @_tickPeriod)\n\n  _handleComplete: ->\n    if @props.onComplete\n      @props.onComplete()\n\n  _clearBackground: ->\n    @_background.clearRect 0, 0, @refs.timer.width, @refs.timer.height\n\n  _clearTimer: ->\n    @_timer.clearRect 0, 0, @refs.timer.width, @refs.timer.height\n\n  _drawBackground: ->\n    @_background.beginPath()\n    @_background.globalAlpha = @props.alpha / 3\n    @_background.fillStyle = @props.color\n    @_background.arc @_radius, @_radius,      @_radius,           0, Math.PI * 2, false\n    @_background.arc @_radius, @_radius, @_innerRadius, Math.PI * 2,           0, true\n    @_background.closePath()\n    @_background.fill()\n\n  _formattedTime: ->\n    decimals = (@_seconds <= 9.9 && @props.showMilliseconds) ? 1 : 0\n\n    if @props.timeFormat == 'hms'\n      hours   = parseInt( @_seconds / 3600 ) % 24\n      minutes = parseInt( @_seconds / 60 ) % 60\n      seconds = (@_seconds % 60).toFixed(decimals)\n\n      hours   = \"0#{hours}\" if hours < 10\n      minutes = \"0#{minutes}\" if minutes < 10\n      seconds = \"0#{seconds}\" if seconds < 10 && minutes >= 1\n\n      timeParts = []\n      timeParts.push hours if hours > 0\n      timeParts.push minutes if minutes > 0\n      timeParts.push seconds\n\n      timeParts.join ':'\n    else\n      return @_seconds.toFixed(decimals)\n\n  _fontSize: (timeString) ->\n    if @props.fontSize == 'auto'\n      scale = switch timeString.length\n        when 8 then 4 # hh:mm:ss\n        when 5 then 3 # mm:ss\n        else 2        # ss or ss.s\n      size = @_radius / scale\n      \"#{size}px\"\n    else\n      @props.fontSize\n\n  _drawTimer: ->\n    percent = @_fraction * @_seconds + 1.5\n    formattedTime = @_formattedTime()\n\n    # Timer\n    @_timer.globalAlpha = @props.alpha\n    @_timer.fillStyle = @props.color\n    @_timer.font = \"bold #{@_fontSize(formattedTime)} #{@props.font}\"\n    @_timer.fillText formattedTime, @_radius, @_radius\n    @_timer.beginPath()\n    @_timer.arc @_radius, @_radius,      @_radius,     Math.PI * 1.5, Math.PI * percent, false\n    @_timer.arc @_radius, @_radius, @_innerRadius, Math.PI * percent,     Math.PI * 1.5, true\n    @_timer.closePath()\n    @_timer.fill()\n\n  render: ->\n    React.createElement(\"div\", {\"ref\": 'component', \"className\": \"react-countdown-clock\"},\n      React.createElement(\"canvas\", {\"ref\": 'background', \"style\": ( position: 'absolute' ), \"width\": (@props.size), \"height\": (@props.size)}),\n      React.createElement(\"canvas\", {\"ref\": 'timer', \"style\": ( position: 'absolute' ), \"width\": (@props.size), \"height\": (@props.size)})\n    )\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/cjsx-loader!./react-countdown-clock.coffee\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}